# 包装箱和模块

当一个项目开始变得更大，把它分为一堆更小的部分然后再把它们装配到一起被认为是一个好的软件工程实践。另外定义良好的接口，这样有些函数是私有的而有些是私有的，也非常重要。Rust有一个模块系统来帮助我们处理这些工作。

## 基础术语：包装箱和模块
Rust有两个不同的术语与模块系统有关：*包装箱*（*crate*）和*模块*（*module*）。包装箱是其它语言中*库*或*包*的同义词。因此“Cargo”则是Rust包管理工具的名字：你通过Cargo发送你的包装箱给别人。包装箱可以根据项目的不同生成可执行文件或库文件。

每个包装箱有一个隐含的*根模块*（*root module*）包含模块的代码。你可以在根模块下定义一个子模块树。模块允许你为自己模块的代码分区。

作为一个例子，让我们来创建一个*短语*（*phrases*）包装箱，它会给我们一些不同语言的短语。为了使事情变得简单，我们仅限于“你好”和“再见”这两个短语，并使用英语和日语的短语。我们采用如下模块布局：
```
                                +-----------+
                            +---| greetings |
                            |   +-----------+
              +---------+   |
              | english |---+
              +---------+   |   +-----------+
              |             +---| farewells |
+---------+   |                 +-----------+
| phrases |---+
+---------+   |                  +-----------+
              |              +---| greetings |
              +----------+   |   +-----------+
              | japanese |---+
              +----------+   |
                             |   +-----------+
                             +---| farewells |
                                 +-----------+
```
在这个例子中，`phrases`是我们包装箱的名字。剩下的所有都是模块。你可以看到它们组成了一个树，它们以包装箱为*根*，这同时也是树的根：`phrases`。

现在我们有了一个计划，让我们在代码中定义这些模块。让我们以用Cargo创建一个新包装箱作为开始：
```bash
$ cargo new phrases
$ cd phrases
```
如果你还记的，这会为我们生成一个简单的项目：
```bash
$ tree .
.
├── Cargo.toml
└── src
    └── lib.rs

1 directory, 2 files
```
`src/lib.rs`是我们包装箱的根，与上面图表中的`phrases`对应。

## 定义模块
我们用`mod`关键字来定义我们的每一个模块。让我们把`src/lib.rs`写成这样：
```rust
// in src/lib.rs

mod english {
    mod greetings {

    }

    mod farewells {

    }
}

mod japanese {
    mod greetings {

    }

    mod farewells {

    }
}
```
在`mod`关键字之后是模块的名字。模块的命名采用Rust其它标识符的命名惯例：`lower_snake_case`。在大括号中（`{}`）是模块的内容。

在`mod`中，你可以定义子`mod`。我们可以用双冒号（`::`）标记访问子模块。我们的4个嵌套模块是`english::greetings`，`english::farewells`，`japanese::greetings`和`japanese::farewells`。因为子模块位于父模块的命名空间中，所以这些不会冲突：`english::greetings`和`japanese::greetings`是不同的，即便它们的名字都是`greetings`。

因为这个包装箱的根文件叫做`lib.rs`，且没有一个`main()`函数。Cargo会把这个包装箱构建为一个库：
```bash
$ cargo build
   Compiling phrases v0.0.1 (file:///home/you/projects/phrases)
$ ls target
deps  libphrases-a7448e02a0468eaa.rlib  native
```
`libphrase-hash.rlib`是构建好的包装箱。在我们了解如何使用这个包装箱之前，先让我们把它拆分为多个文件。
