# If语句

Rust的If并不是特别复杂，不过你会发现它更像动态类型语言而不是更传统的系统语言。所以让我来说说它，以便你能把握这些细节。

If语句是*分支*这个更加宽泛的概念的一个特定形式。它的名字来源于树的树枝：一个选择点，根据选择的不同，将会使用不同的路径。

在If语句中，这里有一个选择导致了两个路径：
```rust
let x = 5;

if x == 5 {
    println!("x is five!");
}
```
如果在什么别的地方更改了x的值（你确定不加mut可以吗。。。），这一行将不会输出。更具体一点，如果`if`后面的表达式的值为`true`，这个代码块将被执行。为`false`则不被执行。

如果你想什么在值为`false`是发生，使用`else`：
```rust
let x = 5;

if x == 5 {
    println!("x is five!");
} else {
    println!("x is not five :(");
}
```
如果不止一种情况，使用`else if`：
```rust
let x = 5;

if x == 5 {
    println!("x is five!");
} else if x == 6 {
    println!("x is six!");
} else {
    println!("x is not five or six :(");
}
```
这些都是非常标准的情况。然而你也可以这么写：
```rust
let x = 5;

let y = if x == 5 {
    10
} else {
    15
}; // y: i32
```
你可以也应该这么写：
```rust
let x = 5;

let y = if x == 5 { 10 } else { 15 }; // y: i32
```
这展示了亮点Rust有趣的地方：他是一门基于表达式的语言，并且这里分号与其它基于“大括号和分号”的语言的分号不同。这两点是相互联系的。

## 表达式（Expressions） vs 语句（Statements）
Rust是一门主要基于表达式的语言。只有两种语句，然后其它的一切都是表达式。

这又有什么区别呢？表达式返回一个值，而声明不返回。在许多语言中`if`语句是语句，也就是说，`let x = if ...`没有意义。不过在Rust这中，`if`是一个表达式，也就是说它返回一个值。我们可以用这个值来初始化绑定。

说到这，绑定是两种Rust语句中的一种。正式的名称为*声明语句*（*declaration statement*）。到目前为止，`let`是我们见过唯一一种声明语句。让我们接着聊聊这些。

在一些语言中，变量绑定可以被写成表达式，而不只是语句。比如Ruby：
```ruby
x = y = 5
```
然后在Rust中，`let`声明的绑定不是一个表达式。下面的代码将会产生一个编译时错误：
```rust
let x = (let y = 5); // expected identifier, found keyword `let`
```
编译器告诉我们它希望看到表达式的开始，而`let`只能是一个语句的开头，而不是表达式。

注意为一个绑定过的变量赋值仍是一个表达式，虽然它的返回值不是特别有用。这不像C语言，赋值语句的值是被赋予的值，而Rust中赋值语句的值是一个单元类型`()`（这个我们稍后介绍）。

Rust中第二类语句是*表达式语句*（*expression statement*）。它的目的是将任何表达式变成一个语句。在实际的情况下，Rust语法期望语句后面跟着另一个语句。这意味这你需要用分号分隔每个表达式。这也意味着Rust向大部分其它语言一样在每一行的末尾加一个分号，你也会在大部分Rust代码行尾看到一个分号。

那么除了那些“大部分”代码呢？你已经见过它们了，在如下代码中：
```rust
let x = 5;

let y: i32 = if x == 5 { 10 } else { 15 };
```
注意到我注明了`y`的类型，来明确我需要一个整型的`y`。

这跟下面的代码不一样，下面的代码将不能编译：
```rust
let x = 5;

let y: i32 = if x == 5 { 10; } else { 15; };
```
注意`10`和`15`后面的分号。Rust给我们如下错误：
```
error: mismatched types: expected `i32`, found `()` (expected i32, found ())
```
我们需要一个整形却得到一个`()`。`()`是一个*单元*（*unit*），这是Rust类型系统中一个特殊的类型。在Rust中，`()`不是一个有效的`i32`类型的值。它只能是`()`类型变量的有效值，但这并不是非常有用。还记得我们说语句并不返回值吗？这正是单元的作用。分号将表达式变为语句并且将它的值变为一个单元。

还有一种情况你不会在一行Rust代码的结尾看到分号。这下一章我们要介绍的：函数。
